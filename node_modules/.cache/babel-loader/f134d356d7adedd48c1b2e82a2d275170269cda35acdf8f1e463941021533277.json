{"ast":null,"code":"var _jsxFileName = \"/Users/user/my-ts-react-app/src/NumberCounter.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport grapesjs from 'grapesjs';\nimport 'grapesjs/dist/css/grapes.min.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NumberCounter = ({\n  start,\n  end,\n  duration\n}) => {\n  _s();\n  const editorRef = useRef(null);\n  useEffect(() => {\n    const editor = grapesjs.init({\n      // container: editorRef.current,\n      fromElement: true,\n      plugins: ['gjs-preset-webpage'],\n      storageManager: false\n    });\n    const counterComponent = editor.DomComponents.addComponent({\n      name: 'NumberCounter',\n      // isComponent: el => el.classList && el.classList.contains('number-counter'),\n      model: {\n        defaults: {\n          start,\n          end,\n          duration\n        }\n      },\n      view: {\n        init() {\n          this.listenTo(this.model, 'change:start change:end change:duration', this.updateContent);\n        },\n        updateContent() {\n          const {\n            start,\n            end,\n            duration\n          } = this.model.attributes;\n          const element = this.el;\n          element.innerHTML = start.toString(); // Initial value\n\n          let current = start;\n          const step = (end - start) / (duration / 1000); // Calculate step based on duration\n\n          const intervalId = setInterval(() => {\n            current += step;\n            element.innerHTML = Math.round(current).toString();\n            if (current >= end) {\n              clearInterval(intervalId);\n              element.innerHTML = end.toString(); // Ensure the final value is exact\n            }\n          }, 1000); // Update every second\n        }\n      }\n    });\n\n    editor.setComponents([counterComponent]);\n  }, [start, end, duration]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: editorRef\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 10\n  }, this);\n};\n_s(NumberCounter, \"FXGU5sRik9TpAO5B+Yli91RwFDk=\");\n_c = NumberCounter;\nexport default NumberCounter;\nvar _c;\n$RefreshReg$(_c, \"NumberCounter\");","map":{"version":3,"names":["React","useEffect","useRef","grapesjs","jsxDEV","_jsxDEV","NumberCounter","start","end","duration","_s","editorRef","editor","init","fromElement","plugins","storageManager","counterComponent","DomComponents","addComponent","name","model","defaults","view","listenTo","updateContent","attributes","element","el","innerHTML","toString","current","step","intervalId","setInterval","Math","round","clearInterval","setComponents","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/user/my-ts-react-app/src/NumberCounter.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport grapesjs from 'grapesjs';\nimport 'grapesjs/dist/css/grapes.min.css';\n\ninterface NumberCounterProps {\n  start: number;\n  end: number;\n  duration: number;\n}\n\nconst NumberCounter: React.FC<NumberCounterProps> = ({ start, end, duration }) => {\n  const editorRef = useRef(null);\n\n  useEffect(() => {\n    const editor = grapesjs.init({\n      // container: editorRef.current,\n      fromElement: true,\n      plugins: ['gjs-preset-webpage'],\n      storageManager: false,\n    });\n\n    const counterComponent = editor.DomComponents.addComponent({\n      name: 'NumberCounter',\n      // isComponent: el => el.classList && el.classList.contains('number-counter'),\n      model: {\n        defaults: {\n          start,\n          end,\n          duration,\n        },\n      },\n      view: {\n        init() {\n          this.listenTo(this.model, 'change:start change:end change:duration', this.updateContent);\n        },\n        updateContent() {\n          const { start, end, duration } = this.model.attributes;\n          const element = this.el;\n          element.innerHTML = start.toString(); // Initial value\n\n          let current = start;\n          const step = (end - start) / (duration / 1000); // Calculate step based on duration\n\n          const intervalId = setInterval(() => {\n            current += step;\n            element.innerHTML = Math.round(current).toString();\n\n            if (current >= end) {\n              clearInterval(intervalId);\n              element.innerHTML = end.toString(); // Ensure the final value is exact\n            }\n          }, 1000); // Update every second\n        },\n      },\n    });\n\n    editor.setComponents([counterComponent]);\n  }, [start, end, duration]);\n\n  return <div ref={editorRef}></div>;\n};\n\nexport default NumberCounter;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAChD,OAAOC,QAAQ,MAAM,UAAU;AAC/B,OAAO,kCAAkC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAQ1C,MAAMC,aAA2C,GAAGA,CAAC;EAAEC,KAAK;EAAEC,GAAG;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAChF,MAAMC,SAAS,GAAGT,MAAM,CAAC,IAAI,CAAC;EAE9BD,SAAS,CAAC,MAAM;IACd,MAAMW,MAAM,GAAGT,QAAQ,CAACU,IAAI,CAAC;MAC3B;MACAC,WAAW,EAAE,IAAI;MACjBC,OAAO,EAAE,CAAC,oBAAoB,CAAC;MAC/BC,cAAc,EAAE;IAClB,CAAC,CAAC;IAEF,MAAMC,gBAAgB,GAAGL,MAAM,CAACM,aAAa,CAACC,YAAY,CAAC;MACzDC,IAAI,EAAE,eAAe;MACrB;MACAC,KAAK,EAAE;QACLC,QAAQ,EAAE;UACRf,KAAK;UACLC,GAAG;UACHC;QACF;MACF,CAAC;MACDc,IAAI,EAAE;QACJV,IAAIA,CAAA,EAAG;UACL,IAAI,CAACW,QAAQ,CAAC,IAAI,CAACH,KAAK,EAAE,yCAAyC,EAAE,IAAI,CAACI,aAAa,CAAC;QAC1F,CAAC;QACDA,aAAaA,CAAA,EAAG;UACd,MAAM;YAAElB,KAAK;YAAEC,GAAG;YAAEC;UAAS,CAAC,GAAG,IAAI,CAACY,KAAK,CAACK,UAAU;UACtD,MAAMC,OAAO,GAAG,IAAI,CAACC,EAAE;UACvBD,OAAO,CAACE,SAAS,GAAGtB,KAAK,CAACuB,QAAQ,CAAC,CAAC,CAAC,CAAC;;UAEtC,IAAIC,OAAO,GAAGxB,KAAK;UACnB,MAAMyB,IAAI,GAAG,CAACxB,GAAG,GAAGD,KAAK,KAAKE,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC;;UAEhD,MAAMwB,UAAU,GAAGC,WAAW,CAAC,MAAM;YACnCH,OAAO,IAAIC,IAAI;YACfL,OAAO,CAACE,SAAS,GAAGM,IAAI,CAACC,KAAK,CAACL,OAAO,CAAC,CAACD,QAAQ,CAAC,CAAC;YAElD,IAAIC,OAAO,IAAIvB,GAAG,EAAE;cAClB6B,aAAa,CAACJ,UAAU,CAAC;cACzBN,OAAO,CAACE,SAAS,GAAGrB,GAAG,CAACsB,QAAQ,CAAC,CAAC,CAAC,CAAC;YACtC;UACF,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;QACZ;MACF;IACF,CAAC,CAAC;;IAEFlB,MAAM,CAAC0B,aAAa,CAAC,CAACrB,gBAAgB,CAAC,CAAC;EAC1C,CAAC,EAAE,CAACV,KAAK,EAAEC,GAAG,EAAEC,QAAQ,CAAC,CAAC;EAE1B,oBAAOJ,OAAA;IAAKkC,GAAG,EAAE5B;EAAU;IAAA6B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAM,CAAC;AACpC,CAAC;AAACjC,EAAA,CAlDIJ,aAA2C;AAAAsC,EAAA,GAA3CtC,aAA2C;AAoDjD,eAAeA,aAAa;AAAC,IAAAsC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}